/*TABLES*/
-----------------------------------------------------------------

CREATE TABLE EMPLOYEE
(
    EMPLOYEE_ID   INTEGER PRIMARY KEY AUTO_INCREMENT,
    DNI           VARCHAR(9)  NOT NULL,
    NAME          VARCHAR(20) NOT NULL,
    FIRST_SURNAME VARCHAR(50) NOT NULL,
    BIRTH_DATE    DATETIME    NOT NULL,
    NATIONALITY   VARCHAR(20) NOT NULL,
    ROLE          VARCHAR(10) NOT NULL,
    EMAIL         VARCHAR(50) NOT NULL,
    PASSWORD      VARCHAR(20) NOT NULL,
    ACTIVE        NUMERIC DEFAULT 1,
    CONSTRAINT EMP_ROL_CK CHECK (ROLE IN ('ADMIN', 'EMPLEADO'))
);

CREATE TABLE CLIENT
(
    CLIENT_ID      INTEGER PRIMARY KEY AUTO_INCREMENT,
    DNI            VARCHAR(9)  NOT NULL,
    NAME           VARCHAR(20) NOT NULL,
    FIRST_SURNAME  VARCHAR(50) NOT NULL,
    SECOND_SURNAME VARCHAR(50),
    BIRTH_DATE     DATETIME    NOT NULL,
    PROFESSION     VARCHAR(20),
    ACTIVE         NUMERIC DEFAULT 1
);

CREATE TABLE TOUR
(
    TOUR_ID        INTEGER PRIMARY KEY AUTO_INCREMENT,
    EMPLOYEE_ID    INTEGER,
    TITLE          VARCHAR(50)  NOT NULL,
    DESCRIPTION    VARCHAR(50),
    TOPIC          VARCHAR(25)  NOT NULL,
    PLACE          VARCHAR(50)  NOT NULL,
    STARTING_POINT VARCHAR(100) NOT NULL,
    MAX_ATTENDEES  NUMERIC      NOT NULL,
    PRICE          REAL         NOT NULL,
    START_DATE     DATETIME     NOT NULL,
    CANCELLED      NUMERIC DEFAULT 0,
    CONSTRAINT TOU_EMP_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE (EMPLOYEE_ID) ON DELETE SET NULL,
    CONSTRAINT TOU_TOP_CK CHECK (TOPIC IN ('ACTIVIDAD_FAMILIAR', 'CONCIERTO', 'DANZA_TEATRO', 'DEPORTES',
                                           'EVENTOS_GASTRONOMICOS', 'EXPOSICIONES', 'FESTIVALES', 'FIESTAS_TRADICIONES',
                                           'CONGRESOS_FERIAS', 'RUTAS', 'OTROS'))
);

CREATE TABLE EMPLOYEE_REGISTRATION_CANCELLATION
(
    REGISTRATION_CANCELLATION_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    EMPLOYEE_ID                  INTEGER,
    START_DATE                   DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
    END_DATE                     DATETIME,
    CONSTRAINT EMP_REG_CAN_EMP_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE (EMPLOYEE_ID) ON DELETE CASCADE
);

CREATE TABLE CLIENT_REGISTRATION_CANCELLATION
(
    REGISTRATION_CANCELLATION_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    CLIENT_ID                    INTEGER,
    START_DATE                   DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
    END_DATE                     DATETIME,
    CONSTRAINT CLI_REG_CAN_EMP_FK FOREIGN KEY (CLIENT_ID) REFERENCES CLIENT (CLIENT_ID) ON DELETE CASCADE
);

CREATE TABLE CLIENT_TOUR
(
    CLIENT_ID INTEGER,
    TOUR_ID   INTEGER,
    CONSTRAINT CLI_ID_FK FOREIGN KEY (CLIENT_ID) REFERENCES CLIENT (CLIENT_ID) ON DELETE CASCADE,
    CONSTRAINT TOU_CLI_ID_FK FOREIGN KEY (TOUR_ID) REFERENCES TOUR (TOUR_ID) ON DELETE CASCADE
);

CREATE TABLE BONUS
(
    BONUS_ID         INTEGER PRIMARY KEY AUTO_INCREMENT,
    CLIENT_ID        INTEGER,
    BONUS_TYPE       INTEGER                            NOT NULL,
    DESCRIPTION      VARCHAR(20)                        NOT NULL,
    ATTAINTMENT_DATE DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
    CONSTRAINT BON_CLI_FK FOREIGN KEY (CLIENT_ID) REFERENCES CLIENT (CLIENT_ID) ON DELETE CASCADE,
    CONSTRAINT BON_TYP_CK CHECK (BONUS_TYPE IN (5, 10, 15, 20, 25))
);

CREATE TABLE EMPLOYEE_CLOCK_IN_CLOCK_OUT
(
    SESSION_ID  INTEGER PRIMARY KEY AUTO_INCREMENT,
    EMPLOYEE_ID INTEGER,
    START_DATE  DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
    END_DATE    DATETIME,
    CONSTRAINT SES_EMP_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE (EMPLOYEE_ID) ON DELETE CASCADE
);

/*INSERTS*/
-----------------------------------------------------------------

INSERT INTO `bonus`
VALUES (94, 88, 5, '5% de descuento', '2020-10-25 00:00:00', NULL, NULL), (96, 83, 5, '5% de descuento', '2020-10-25 00:00:00', NULL, NULL), (106, 99, 5, '5% de descuento', '2020-10-25 00:00:00', NULL, NULL), (112, 108, 5, '5% de descuento', '2020-10-25 00:00:00', NULL, NULL);

INSERT INTO `client`
VALUES (83, '123456', 'ALBA', 'GARCIA', 'GARCIA', '2020-10-01 00:00:00', 'PROFESION', 1), (88, '123456', 'IRATXE', 'MENDEZ', 'MENDEZ', '2020-10-01 00:00:00', 'PROFESION', 1), (99, '123456', 'GABRIELA', 'ARAUJO', 'ARAUJO', '2020-10-01 00:00:00', 'PROFESION', 1), (108, '123456', 'EMMA', 'WANG', 'WANG', '2020-10-01 00:00:00', 'PROFESION', 1);

INSERT INTO `client_registration_cancellation`
VALUES (84, 83, '2020-10-25 00:00:00', NULL), (89, 88, '2020-10-25 00:00:00', NULL), (100, 99, '2020-10-25 00:00:00', '2020-10-25 00:00:00'), (101, 99, '2020-10-25 00:00:00', NULL), (109, 108, '2020-10-25 00:00:00', NULL);

INSERT INTO `client_tour`
VALUES (83, 15), (88, 15), (88, 67), (88, 17), (88, 65), (88, 19), (83, 67), (83, 17), (83, 67), (83, 17), (83, 65), (83, 67), (83, 17), (83, 65), (83, 67), (83, 19), (99, 15), (99, 67), (99, 15), (99, 17), (99, 67), (99, 15), (99, 17), (99, 67), (99, 105), (99, 15), (99, 17), (99, 65), (99, 67), (99, 105), (99, 15), (108, 15), (108, 67), (108, 15), (108, 17), (108, 67), (108, 15), (108, 17), (108, 67), (108, 105), (108, 15), (108, 65);

INSERT INTO `employee`
VALUES (5, '123456', 'ASIER', 'ORTIZ', '2020-10-24 00:00:00', 'ESPAÃ‘OL', 'ADMIN', 'asier@test.com', '123456', 1), (7, '123456', 'IVAN', 'ORTIZ', '2020-10-01 00:00:00', 'ESPAÃ‘OL', 'EMPLEADO', 'ivan@test.com', '123456', 1), (36, '123456', 'ALBERTO', 'MARINA', '2020-10-01 00:00:00', 'ESPAÃ‘OL', 'EMPLEADO', 'alberto@test.com', '123456', 1), (39, '123456', 'NEREA', 'ALONSO', '2020-10-01 00:00:00', 'ESPAÃ‘OLA', 'EMPLEADO', 'nerea@test.com', '123456', 0), (102, '123456', 'ELIA', 'DE HARO', '2020-10-01 00:00:00', 'ESPAÃ‘OLA', 'ADMIN', 'helia@test.com', '123456', 1), (118, '123456', 'SVETA', 'VYKHOR', '2020-06-30 00:00:00', 'UCRANIANA', 'ADMIN', 'sveta@test.com', '123456', 1), (120, '123456', 'ANDER', 'MILLAN', '2020-10-13 00:00:00', 'ESPAÃ‘OL', 'ADMIN', 'ander@test.com', '123456', 1);

INSERT INTO `employee_clock_in_clock_out`
VALUES (24, 5, '2020-10-25 07:20:16', NULL), (25, 5, '2020-10-25 07:21:35', NULL), (26, 5, '2020-10-25 07:21:51', NULL), (27, 5, '2020-10-25 07:25:55', NULL), (28, 5, '2020-10-25 07:26:13', NULL), (29, 5, '2020-10-25 07:27:58', NULL), (30, 5, '2020-10-25 07:29:49', '2020-10-25 07:29:55'), (31, 5, '2020-10-25 07:30:04', NULL), (32, 5, '2020-10-25 08:06:52', NULL), (33, 5, '2020-10-25 08:11:23', NULL), (34, 5, '2020-10-25 08:12:07', NULL), (35, 5, '2020-10-25 08:13:28', NULL), (38, 5, '2020-10-25 08:15:55', NULL), (41, 5, '2020-10-25 08:18:08', '2020-10-25 08:18:31'), (42, 5, '2020-10-25 08:18:47', '2020-10-25 08:19:03'), (44, 39, '2020-10-25 08:19:20', '2020-10-25 08:19:25'), (45, 5, '2020-10-25 08:19:36', '2020-10-25 08:20:27'), (46, 5, '2020-10-25 16:36:33', NULL), (48, 5, '2020-10-25 16:41:57', NULL), (49, 5, '2020-10-25 16:43:54', NULL), (50, 5, '2020-10-25 16:47:50', NULL), (51, 5, '2020-10-25 16:48:32', NULL), (52, 5, '2020-10-25 16:49:21', NULL), (53, 5, '2020-10-25 16:50:41', NULL), (56, 5, '2020-10-25 16:52:55', NULL), (60, 5, '2020-10-25 16:56:23', NULL), (61, 5, '2020-10-25 17:04:34', NULL), (62, 5, '2020-10-25 17:06:14', NULL), (63, 5, '2020-10-25 17:14:43', NULL), (64, 5, '2020-10-25 17:17:10', NULL), (66, 5, '2020-10-25 17:21:25', NULL), (68, 5, '2020-10-25 17:23:55', NULL), (69, 5, '2020-10-25 17:25:06', NULL), (70, 5, '2020-10-25 17:27:47', NULL), (73, 5, '2020-10-25 17:40:33', NULL), (75, 5, '2020-10-25 17:43:16', NULL), (76, 5, '2020-10-25 17:46:16', NULL), (77, 5, '2020-10-25 17:47:37', NULL), (80, 5, '2020-10-25 17:50:17', NULL), (81, 5, '2020-10-25 17:52:01', NULL), (82, 5, '2020-10-25 17:54:21', NULL), (85, 5, '2020-10-25 17:57:19', NULL), (86, 5, '2020-10-25 18:00:44', NULL), (87, 5, '2020-10-25 18:01:37', NULL), (90, 5, '2020-10-25 18:03:47', NULL), (91, 5, '2020-10-25 18:05:06', NULL), (92, 5, '2020-10-25 18:07:06', NULL), (93, 5, '2020-10-25 18:08:27', NULL), (95, 5, '2020-10-25 18:11:18', NULL), (97, 5, '2020-10-25 18:15:22', NULL), (98, 5, '2020-10-25 18:21:50', '2020-10-25 18:27:13'), (107, 5, '2020-10-25 18:31:50', NULL), (111, 5, '2020-10-25 18:34:49', NULL), (113, 5, '2020-10-26 07:19:23', NULL), (114, 5, '2020-10-26 07:22:11', '2020-10-26 07:22:25'), (115, 5, '2020-10-26 10:10:05', NULL), (116, 5, '2020-10-26 11:28:53', '2020-10-26 11:30:21'), (117, 5, '2020-10-26 12:00:12', '2020-10-26 12:05:14');

INSERT INTO `employee_registration_cancellation`
VALUES (37, 36, '2020-10-25 00:00:00', NULL), (40, 39, '2020-10-25 00:00:00', '2020-10-25 00:00:00'), (43, 39, '2020-10-25 00:00:00', '2020-10-25 00:00:00'), (47, 39, '2020-10-25 00:00:00', '2020-10-25 00:00:00'), (103, 102, '2020-10-25 00:00:00', '2020-10-25 00:00:00'), (104, 102, '2020-10-25 00:00:00', NULL), (119, 118, '2020-10-26 00:00:00', NULL), (121, 120, '2020-10-26 00:00:00', NULL);

INSERT INTO `hibernate_sequence`
VALUES (123), (123), (123), (123), (123), (123);

INSERT INTO `tour`
VALUES (15, 5, 'TITLE', 'DESCRIPTION', 'FIESTAS_TRADICIONES', 'PLACE', 'POINT', 23, 31, '2020-12-09 00:00:00', 0), (16, 5, 'TITLE', 'DESCRIPTION', 'DEPORTES', 'PLACE', 'POINT', 56, 21, '2020-11-01 00:00:00', 0), (17, 5, 'TITLE', 'DESCRIPTION', 'OTROS', 'PLACE', 'POINT', 11, 22, '2020-11-30 00:00:00', 0), (18, 5, 'TITLE', 'DESCRIPTION', 'DANZA_TEATRO', 'PLACE', 'POINT', 44, 22, '2020-10-31 00:00:00', 0), (19, 5, 'TITLE', 'DESCRIPTION', 'EXPOSICIONES', 'PLACE', 'POINT', 66, 33, '2020-11-28 00:00:00', 0), (65, 36, 'TITLE', 'DESCRIPTION', 'ACTIVIDAD_FAMILIAR', 'PLACE', 'POINT', 22, 33, '2020-11-29 02:00:00', 0), (67, 5, 'TITLE', 'DESCRIPTION', 'DEPORTES', 'PLACE', 'POINT', 22, 31, '2020-12-26 03:30:00', 0), (105, 102, 'TITLE', 'DESCRIPTION', 'ACTIVIDAD_FAMILIAR', 'PLACE', 'POINT', 22, 33, '2020-11-29 03:00:00', 0), (122, 118, 'TITLE', 'DESCRIPTION', 'EXPOSICIONES', 'PLACE', 'POINT', 22, 31, '2020-10-01 01:00:00', 0);

-----------------------------------------------------------------